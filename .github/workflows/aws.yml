name: AWS TEST

on:
  workflow_dispatch:
  workflow_call:

permissions:
    write-all

jobs:
    Test:
        runs-on: ubuntu-latest
        steps:

          - uses: actions/checkout@v4
          - name: get
            uses: ./.github/actions/aws
            with:
                env: "DEV"
                role_arn: ${{ secrets.RPA_UIPATH_CICD_ROLE_ARN }}
                aws_region: "us-west-2"
                secret_id: ${{ secrets.RPA_UIPATH_CICD_SECRET_ARN }}

          - name: Dump GitHub context
            env:
                GITHUB_CONTEXT: ${{ toJson(github) }}
            run: echo "$GITHUB_CONTEXT"
          - name: Dump job context
            env:
                JOB_CONTEXT: ${{ toJson(job) }}
            run: echo "$JOB_CONTEXT"
          - name: Dump steps context
            env:
                STEPS_CONTEXT: ${{ toJson(steps) }}
            run: echo "$STEPS_CONTEXT"
          - name: Dump runner context
            env:
                RUNNER_CONTEXT: ${{ toJson(runner) }}
            run: echo "$RUNNER_CONTEXT"
          - name: Dump vars context
            env:
                VARS_JSON: ${{ toJSON(vars) }}
            run: echo "${VARS_JSON}"

          - name: Dump env context
            env:
                ENV_JSON: ${{ toJSON(env) }}
            run: echo "${ENV_JSON}"
